# 项目迭代计划

## 项目背景

### 当前状态
- ✅ Obsidian 知识库已存在（md 文件）
- ❌ 知识库内容未结构化（没有 Inbox/Public/Private 分离）
- ❌ 没有人工审查编辑流程
- ✅ 技术方案已确定（Obsidian + Git + Next.js）
- ✅ 代码规范已建立
- ✅ 项目文件夹结构已创建

### 目标状态
- ✅ 知识库内容结构化（Inbox/Public/Private）
- ✅ 建立人工审查编辑流程
- ✅ 网站可以正常展示内容
- ✅ 自动化工作流（Obsidian → Git → Vercel）

## 迭代策略

### 原则
1. **最小可行产品（MVP）优先**：先实现核心功能
2. **渐进式增强**：从简单到复杂逐步完善
3. **内容驱动**：以内容管理为核心
4. **自动化优先**：减少人工操作

### 迭代阶段
- **Phase 1**: 基础搭建（MVP）
- **Phase 2**: 内容管理流程
- **Phase 3**: 功能完善
- **Phase 4**: 优化和扩展

---

## Phase 1: 网站框架开发（先框架后内容）

**目标**: 先开发完整的网站框架和UI，使用占位数据，然后再接入真实内容

**时间估算**: 1-2 周

**开发策略**: 先框架后内容
- 使用占位数据（Mock Data）开发完整UI
- 完成所有页面的视觉和交互
- 然后再接入 Contentlayer 和真实内容

### 1.1 项目初始化
- [ ] 初始化 Next.js 项目（`01-源代码/网站代码/`）
- [ ] 安装依赖（Tailwind CSS、lucide-react 等，Contentlayer 稍后安装）
- [ ] 配置 TypeScript
- [ ] 配置 ESLint 和 Prettier
- [ ] 配置 Git Hooks

**交付物**:
- Next.js 项目可以正常启动
- 代码规范工具配置完成

**Checkpoint**: `Checkpoint-02-项目初始化完成.md`

### 1.2 设计系统和基础组件
- [ ] 配置 Tailwind CSS 主题（配色、圆角、字体等）
- [ ] 开发 Button 组件（主要、次要、轮廓样式）
- [ ] 开发 Card 组件（统一卡片样式）
- [ ] 开发 Icon 组件封装
- [ ] 创建占位数据（Mock Data）类型定义

**交付物**:
- 设计系统配置完成
- 基础 UI 组件完成
- 占位数据类型定义完成

**Checkpoint**: `Checkpoint-03-设计系统和基础组件完成.md`

### 1.3 布局组件开发
- [ ] 开发 Header 组件（导航栏）
- [ ] 开发 Footer 组件
- [ ] 开发导航栏组件
- [ ] 开发根布局（RootLayout）
- [ ] 实现响应式布局

**交付物**:
- 布局组件完成
- 响应式布局完成

**Checkpoint**: `Checkpoint-04-布局组件完成.md`

### 1.4 页面框架开发（使用占位数据）
- [ ] 开发首页框架
  - [ ] Hero 横幅区域（使用占位数据）
  - [ ] "Most Popular" 区域（使用占位数据）
  - [ ] "Recent posts" 区域（使用占位数据）
  - [ ] Newsletter 订阅区域
- [ ] 开发笔记列表页框架（使用占位数据）
- [ ] 开发笔记详情页框架（使用占位数据）
- [ ] 开发 About 页面框架
- [ ] 实现所有页面的完整样式和交互

**交付物**:
- 所有页面框架完成
- 完整UI和交互完成
- 使用占位数据可以完整浏览网站

**Checkpoint**: `Checkpoint-05-网站框架完成.md`

### 1.5 内容接入（Contentlayer 集成）
- [ ] 安装 Contentlayer
- [ ] 创建 `contentlayer.config.ts`
- [ ] 定义文档类型（News、Note、Page）
- [ ] 配置 Markdown 处理插件
- [ ] 创建临时测试内容（几个示例 md 文件）
- [ ] 替换占位数据为 Contentlayer 数据
- [ ] 测试内容读取和展示

**交付物**:
- Contentlayer 配置完成
- 可以读取和展示真实内容
- 网站框架和内容集成完成

**Checkpoint**: `Checkpoint-06-内容接入完成.md`

---

## Phase 2: 内容管理流程

**目标**: 建立完整的内容管理流程（Obsidian → Git → 网站）

**时间估算**: 1-2 周

### 2.1 Obsidian 知识库结构化
- [ ] 在 Obsidian 中创建目录结构
  - [ ] `收件箱/` - 草稿内容
  - [ ] `公开内容/新闻/` - 新闻内容
  - [ ] `公开内容/笔记/` - 笔记内容
  - [ ] `公开内容/页面/` - 单页内容
  - [ ] `公开内容/附件/` - 图片附件
  - [ ] `私有笔记/` - 私有内容
- [ ] 配置 Obsidian 附件默认路径为 `公开内容/附件`
- [ ] 迁移现有内容到对应目录
- [ ] 为现有内容添加 Frontmatter

**交付物**:
- Obsidian 知识库结构完成
- 内容已分类整理

**Checkpoint**: `Checkpoint-06-Obsidian知识库结构化完成.md`

### 2.2 Git 工作流配置
- [ ] 初始化 Git 仓库（如果还没有）
- [ ] 配置 `.gitignore`（忽略 Private 目录）
- [ ] 安装配置 Obsidian Git 插件
- [ ] 测试 Git 同步功能
- [ ] 创建 GitHub 仓库
- [ ] 配置 GitHub 与本地仓库关联

**交付物**:
- Git 工作流配置完成
- Obsidian 可以自动同步到 GitHub

**Checkpoint**: `Checkpoint-07-Git工作流配置完成.md`

### 2.3 内容同步机制
- [ ] 配置单一仓库方案（代码+内容共存）
- [ ] 将 Obsidian 的 `公开内容/` 同步到项目的 `内容/` 目录
- [ ] 配置图片附件同步脚本
- [ ] 测试内容同步流程

**交付物**:
- 内容同步机制完成
- 可以自动同步 Obsidian 内容到项目

**Checkpoint**: `Checkpoint-08-内容同步机制完成.md`

### 2.4 人工审查流程建立
- [ ] 设计审查流程文档
- [ ] 创建审查检查清单
- [ ] 建立内容质量标准
- [ ] 测试审查流程

**审查流程**:
1. Python 萃取系统生成内容 → `收件箱/`
2. 人工审查内容
3. 审查通过 → 移动到 `公开内容/新闻/` 或 `公开内容/笔记/`
4. Obsidian Git 插件自动提交
5. GitHub Webhook 触发 Vercel 构建
6. 网站自动更新

**交付物**:
- 审查流程文档完成
- 审查流程可以正常运行

**Checkpoint**: `Checkpoint-09-人工审查流程建立完成.md`

---

## Phase 3: 功能完善

**目标**: 完善网站功能，提升用户体验

**时间估算**: 2-3 周

### 3.1 页面功能完善
- [ ] 完善首页（Hero 区域、Most Popular、Recent posts）
- [ ] 完善笔记列表页（分页、筛选、搜索）
- [ ] 完善笔记详情页（Markdown 渲染、代码高亮）
- [ ] 开发 About 页面
- [ ] 实现响应式设计

**交付物**:
- 所有页面功能完成
- 响应式设计完成

**Checkpoint**: `Checkpoint-10-页面功能完善完成.md`

### 3.2 内容管理功能
- [ ] 实现标签系统
- [ ] 实现分类筛选
- [ ] 实现搜索功能
- [ ] 实现内容排序（按日期、按分数等）
- [ ] 实现相关内容推荐

**交付物**:
- 内容管理功能完成
- 用户可以方便地浏览和查找内容

**Checkpoint**: `Checkpoint-11-内容管理功能完成.md`

### 3.3 SEO 和性能优化
- [ ] 添加页面 metadata
- [ ] 添加 Open Graph 标签
- [ ] 添加结构化数据
- [ ] 优化图片加载
- [ ] 优化代码分割
- [ ] 性能测试和优化

**交付物**:
- SEO 优化完成
- 性能优化完成

**Checkpoint**: `Checkpoint-12-SEO和性能优化完成.md`

### 3.4 部署和自动化
- [ ] 配置 Vercel 部署
- [ ] 配置 GitHub Webhook
- [ ] 测试自动部署流程
- [ ] 配置环境变量
- [ ] 配置自定义域名（如需要）

**交付物**:
- 网站可以自动部署
- 自动化工作流完成

**Checkpoint**: `Checkpoint-13-部署和自动化完成.md`

---

## Phase 4: 优化和扩展

**目标**: 持续优化和功能扩展

**时间估算**: 持续进行

### 4.1 内容质量提升
- [ ] 完善内容审查标准
- [ ] 建立内容质量评分机制
- [ ] 优化内容展示效果
- [ ] 添加内容统计功能

### 4.2 用户体验优化
- [ ] 优化加载速度
- [ ] 优化交互体验
- [ ] 添加动画效果
- [ ] 优化移动端体验

### 4.3 功能扩展
- [ ] RSS 订阅功能
- [ ] 评论系统（如需要）
- [ ] 分享功能
- [ ] 收藏功能（如需要）

### 4.4 监控和分析
- [ ] 添加网站分析（Google Analytics 等）
- [ ] 添加错误监控
- [ ] 添加性能监控
- [ ] 定期审查和优化

---

## 当前阶段：Phase 1 - 网站框架开发（先框架后内容）

### 开发策略

采用"先框架后内容"的策略：
1. **第一阶段**：使用占位数据开发完整的网站框架和UI
2. **第二阶段**：接入 Contentlayer 和真实内容

**优势**:
- 快速迭代，不需要等待内容准备
- UI优先，专注于视觉和交互
- 并行开发，UI和内容可以并行准备

### 下一步行动

1. **立即开始**:
   - [ ] 初始化 Next.js 项目
   - [ ] 配置基础工具（Tailwind CSS、TypeScript 等）

2. **本周完成**:
   - [ ] Phase 1.1 项目初始化
   - [ ] Phase 1.2 设计系统和基础组件
   - [ ] Phase 1.3 布局组件开发

3. **下周计划**:
   - [ ] Phase 1.4 页面框架开发（使用占位数据）
   - [ ] Phase 1.5 内容接入（Contentlayer 集成）

### 快速开发指南

参考文档：`02-文档资料/开发文档/快速开发指南-先框架后内容.md`

### 关键决策点

1. **内容同步方案确认**
   - 单一仓库方案 vs Git Submodule
   - 需要确认 Obsidian 知识库路径

2. **审查流程设计**
   - 审查标准
   - 审查工具（是否需要开发审查界面）

3. **内容迁移策略**
   - 现有内容如何迁移
   - 如何添加 Frontmatter

---

## 风险与应对

### 风险 1: Contentlayer 兼容性问题
- **风险**: Contentlayer 可能存在 React 18/19 兼容性问题
- **应对**: 准备备选方案（next-mdx-remote、remark 等）

### 风险 2: 内容同步复杂性
- **风险**: Obsidian 内容同步到项目可能复杂
- **应对**: 先使用手动同步，逐步自动化

### 风险 3: 审查流程效率
- **风险**: 人工审查可能成为瓶颈
- **应对**: 建立清晰的审查标准，逐步优化流程

---

## 成功标准

### Phase 1 成功标准
- ✅ 网站可以正常访问
- ✅ 可以展示内容
- ✅ 基础样式完成

### Phase 2 成功标准
- ✅ 内容管理流程完整
- ✅ 自动化工作流正常
- ✅ 审查流程可以运行

### Phase 3 成功标准
- ✅ 所有功能完成
- ✅ 用户体验良好
- ✅ 性能达标

### Phase 4 成功标准
- ✅ 持续优化
- ✅ 功能扩展
- ✅ 用户反馈良好

---

## 更新记录

- 2025-01-06: 初始版本创建

