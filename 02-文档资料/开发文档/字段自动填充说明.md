# 字段自动填充说明

## 问题说明

现有的 Markdown 文件中，`水下信息`、`案例提取`、`涉及公司` 等字段在正文内容中，而不是在 frontmatter 中。Contentlayer 只能读取 frontmatter 中的字段，所以需要将这些字段保存到 frontmatter 中。

## 解决方案

### 方法 1：重新同步内容（推荐）

1. **访问管理页面**：`http://localhost:3002/admin`
2. **解析表格**：点击"解析表格"按钮
3. **选择内容**：勾选需要同步的内容（确保这些内容在 Obsidian 表格中有对应的字段）
4. **执行同步**：点击"执行同步"按钮
5. **等待完成**：同步完成后，这些字段会被保存到 Markdown 文件的 frontmatter 中

### 方法 2：手动编辑现有文件

如果现有文件已经存在，可以手动将这些字段添加到 frontmatter 中：

```markdown
---
title: "标题"
date: 2026-01-06
tags: ["标签"]
chineseTitle: "中文标题"
underwaterInfo: "水下信息内容"
caseExtraction: "案例提取内容"
relatedCompanies: "公司1,公司2,公司3"
---
```

## 字段说明

### chineseTitle（中文标题）
- **来源**：Obsidian 表格中的"中文标题"列
- **用途**：在周报中显示的中文标题
- **必填**：是（如果没有，会使用 title）

### underwaterInfo（水下信息）
- **来源**：Obsidian 表格中的"水下信息"列
- **用途**：显示隐藏的、不为人知的信息
- **格式**：支持多行文本，`<br>` 标签会被转换为换行符

### caseExtraction（案例提取）
- **来源**：Obsidian 表格中的"案例提取"列
- **用途**：显示关键案例或示例
- **格式**：支持多行文本，`<br>` 标签会被转换为换行符

### relatedCompanies（涉及公司）
- **来源**：Obsidian 表格中的"涉及公司"列
- **用途**：显示涉及的公司名称
- **格式**：多个公司用逗号分隔，`<br>` 标签会被转换为逗号

## 验证方法

同步完成后，可以检查生成的 Markdown 文件：

1. **查看文件**：打开 `内容/公开内容/新闻/` 或 `内容/公开内容/笔记/` 目录下的文件
2. **检查 frontmatter**：文件开头应该有这些字段：
   ```yaml
   ---
   title: "..."
   date: 2026-01-06
   chineseTitle: "..."
   underwaterInfo: "..."
   caseExtraction: "..."
   relatedCompanies: "..."
   ---
   ```

3. **检查编辑器**：在周报编辑器中，选择内容时，这些字段应该会自动填充

## 注意事项

1. **Contentlayer 需要重新生成**：更新 schema 后，需要重启开发服务器或运行 `npx contentlayer dev` 来重新生成类型
2. **现有文件需要更新**：如果文件是在更新 schema 之前创建的，需要重新同步才能包含这些字段
3. **字段名称匹配**：确保 Obsidian 表格中的列名与代码中识别的名称一致：
   - `中文标题` 或 `chineseTitle`
   - `水下信息` 或 `underwaterInfo`
   - `案例提取` 或 `caseExtraction`
   - `涉及公司` 或 `relatedCompanies`

## 调试

如果字段没有自动填充，可以：

1. **检查浏览器控制台**：打开开发者工具，查看是否有错误信息
2. **检查服务器日志**：查看终端中的日志，确认字段是否被正确解析
3. **检查 Markdown 文件**：确认 frontmatter 中是否包含这些字段


