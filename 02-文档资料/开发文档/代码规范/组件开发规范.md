# 组件开发规范

本文档定义 React 组件设计、开发和使用规范。

## 组件分类

### 1. UI 基础组件（界面组件）

位于 `components/界面组件/`，可复用的基础 UI 组件。

```typescript
// components/界面组件/按钮.tsx
interface ButtonProps {
  children: React.ReactNode
  variant?: 'primary' | 'secondary' | 'outline'
  size?: 'sm' | 'md' | 'lg'
  icon?: 'arrow' | 'check' | 'none'
  className?: string
  onClick?: () => void
}

export function Button({ 
  children, 
  variant = 'primary',
  size = 'md',
  icon = 'arrow',
  className = '',
  onClick 
}: ButtonProps) {
  // 实现
}
```

### 2. 布局组件

位于 `components/布局组件/`，页面布局相关组件。

```typescript
// components/布局组件/头部.tsx
export function Header() {
  return (
    <header className="sticky top-0 z-50 bg-white shadow-sm">
      <nav className="container mx-auto px-4">
        {/* 导航内容 */}
      </nav>
    </header>
  )
}
```

### 3. 内容组件

位于 `components/内容组件/`，内容展示相关组件。

```typescript
// components/内容组件/文章卡片.tsx
import type { News } from 'contentlayer/generated'

interface PostCardProps {
  post: News
  className?: string
}

export function PostCard({ post, className = '' }: PostCardProps) {
  return (
    <article className={`rounded-card bg-white p-6 ${className}`}>
      <h2>{post.title}</h2>
      {/* 其他内容 */}
    </article>
  )
}
```

## 组件设计原则

### 1. 单一职责

```typescript
// ✅ 正确 - 单一职责
export function Button({ children, onClick }: ButtonProps) {
  return <button onClick={onClick}>{children}</button>
}

// ❌ 错误 - 职责过多
export function ButtonWithModal({ children, modalContent }: Props) {
  // 按钮 + 模态框，职责不清晰
}
```

### 2. 可复用性

```typescript
// ✅ 正确 - 可复用组件
export function Card({ 
  children, 
  title, 
  className = '' 
}: CardProps) {
  return (
    <div className={`card ${className}`}>
      {title && <h3>{title}</h3>}
      {children}
    </div>
  )
}

// 使用
<Card title="标题">内容</Card>
<Card className="custom-style">其他内容</Card>
```

### 3. 组合优于继承

```typescript
// ✅ 正确 - 使用组合
export function PostList({ posts }: PostListProps) {
  return (
    <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
      {posts.map((post) => (
        <PostCard key={post._id} post={post} />
      ))}
    </div>
  )
}
```

## 组件结构规范

### 1. 文件结构

```typescript
// components/内容组件/文章卡片.tsx

// 1. 导入
import Image from 'next/image'
import Link from 'next/link'
import type { News } from 'contentlayer/generated'

// 2. 类型定义
interface PostCardProps {
  post: News
  className?: string
}

// 3. 组件实现
export function PostCard({ post, className = '' }: PostCardProps) {
  return (
    <article className={`card ${className}`}>
      {/* 组件内容 */}
    </article>
  )
}
```

### 2. Props 设计

```typescript
// ✅ 正确 - 清晰的 Props 接口
interface ButtonProps {
  // 必需属性
  children: React.ReactNode
  
  // 可选属性
  variant?: 'primary' | 'secondary'
  size?: 'sm' | 'md' | 'lg'
  className?: string
  
  // 事件处理
  onClick?: () => void
}
```

### 3. 默认值

```typescript
// ✅ 正确 - 使用默认参数
export function Button({ 
  variant = 'primary',
  size = 'md',
  className = '',
  onClick 
}: ButtonProps) {
  // 实现
}
```

## 组件命名规范

### 1. 组件名

- **PascalCase**：组件名使用 PascalCase
- **描述性**：名称清晰表达组件用途
- **一致性**：同类组件使用一致的命名模式

```typescript
// ✅ 正确
export function PostCard() {}
export function NewsList() {}
export function HeroBanner() {}

// ❌ 错误
export function card() {}        // 小写
export function Post() {}         // 不够描述性
```

### 2. 文件名

- 与组件名一致
- 使用 PascalCase 或 kebab-case

```typescript
// ✅ 正确
PostCard.tsx
post-card.tsx

// ❌ 错误
postCard.tsx      // 不一致
post_card.tsx     // 不使用下划线
```

## 组件导出规范

### 1. 命名导出

```typescript
// ✅ 正确 - 命名导出（推荐）
export function Button() {}
export function Card() {}

// 使用
import { Button, Card } from '@/components/界面组件/按钮'
```

### 2. 默认导出

```typescript
// ✅ 正确 - 默认导出（页面组件）
export default function Page() {}

// 使用
import Page from './page'
```

## 组件文档规范

### 1. 组件注释

```typescript
/**
 * 文章卡片组件
 * 
 * @param post - 文章数据（News 类型）
 * @param className - 额外的 CSS 类名
 * 
 * @example
 * ```tsx
 * <PostCard post={news} className="custom-style" />
 * ```
 */
export function PostCard({ post, className = '' }: PostCardProps) {
  // 实现
}
```

### 2. Props 文档

```typescript
interface PostCardProps {
  /** 文章数据 */
  post: News
  
  /** 额外的 CSS 类名 */
  className?: string
}
```

## 性能优化规范

### 1. React.memo

```typescript
import { memo } from 'react'

export const ExpensiveComponent = memo(function ExpensiveComponent({
  data,
}: Props) {
  return <div>{/* 渲染内容 */}</div>
})
```

### 2. 动态导入

```typescript
import dynamic from 'next/dynamic'

const HeavyComponent = dynamic(() => import('./HeavyComponent'), {
  loading: () => <p>加载中...</p>,
})
```

## 开发注意事项

### ✅ 正确做法

1. **单一职责**：每个组件只负责一个功能
2. **可复用性**：设计可复用的组件
3. **类型安全**：所有 Props 都要有类型定义
4. **默认值**：为可选属性提供默认值
5. **文档注释**：重要组件添加注释

### ❌ 避免做法

1. **不要**创建职责不清的组件
2. **不要**忽略类型定义
3. **不要**过度使用 React.memo
4. **不要**在组件中硬编码数据
5. **不要**忽略性能优化

## 最佳实践总结

1. **单一职责**：每个组件只负责一个功能
2. **可复用性**：设计可复用的组件接口
3. **类型安全**：充分利用 TypeScript
4. **组合优于继承**：使用组件组合
5. **性能优化**：合理使用优化技术
6. **文档完善**：重要组件添加文档注释






