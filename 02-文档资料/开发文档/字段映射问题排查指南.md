# 字段映射问题排查指南

## 问题描述

生成的文件中字段映射错误：
- `date` 字段被设置为标题内容（应该是日期）
- `source` 字段被设置为日期（应该是来源）

## 表格列顺序

根据实际表格结构，列顺序为：
1. 已阅
2. 收藏
3. 序号
4. 评分
5. 类型
6. **来源** (应该映射到 `source`)
7. **抓取时间** (应该映射到 `date`)
8. **中文标题** (应该映射到 `title`)
9. 原标题

## 排查步骤

### 1. 检查服务器终端日志

在解析表格时，服务器终端应该显示：
```
[解析] 表头: [...]
[解析] 表头索引映射: 0: "已阅", 1: "收藏", 2: "序号", ...
[解析] 列0: header="已阅", normalized="已阅", value="..."
[解析] 列1: header="收藏", normalized="收藏", value="..."
...
[解析] 列6: header="来源", normalized="来源", value="36氪"
[解析] 列7: header="抓取时间", normalized="抓取时间", value="2026-01-07 08:03"
[解析] 列8: header="中文标题", normalized="中文标题", value="秘光：AI重构Z世代社交关系"
```

### 2. 检查字段匹配

确认以下匹配是否正确：
- `normalizedHeader === '抓取时间'` → `row.date = value`
- `normalizedHeader === '中文标题'` → `row.title = cleanTitle`
- `normalizedHeader === '来源'` → `row.source = value`

### 3. 检查生成的文件

同步后，检查生成的文件 Frontmatter：
```markdown
---
title: "正确的标题"
date: 2026-01-07  # 注意：应该是日期，不是标题
tags: ["标签"]
source: "36氪"  # 注意：应该是来源，不是日期
---
```

## 可能的原因

1. **字段被覆盖**：在 `else` 分支中，`row[header] = value` 可能覆盖了之前设置的字段
2. **匹配顺序问题**：`if-else` 的匹配顺序可能导致错误的字段被匹配
3. **表头解析问题**：`parseTableRow` 函数可能没有正确解析表头

## 解决方案

如果问题仍然存在，需要：
1. 查看服务器终端的完整日志
2. 检查 `parseTableRow` 函数的输出
3. 确认字段匹配逻辑是否正确执行





